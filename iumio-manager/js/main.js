/*
 * This is an iumio Framework component
 *
 * (c) RAFINA DANY <dany.rafina@iumio.com>
 *
 * iumio Framework, an iumio component [https://www.iumio.com]
 *
 * To get more information about licence, please check the licence file
 *
 */

$(document).ready(function(){$(".iumio-loader-gen").fadeOut("fast");var t=0,e=0,a=function(t){return!/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g.test(t)},n=function(t){var e=t.getHours(),a=t.getMinutes(),n=e>=12?"PM":"AM",o=(e=(e%=12)||12)+":"+(a=a<10?"0"+a:a)+" "+n;return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()+"  "+o},o=function(t){$("#modalManager").modal(t)},d=function(){if(1===e)return!1;e=1;var t=$("#modalManager");t.find(".modal-body").html("<h4 class='text-center'>The operation has been successfully completed.</h4>"),t.find(".btn-close").html("Close"),t.find(".btn-valid").hide()},r=function(t){if(1===e)return!1;var a=$("#modalManager");a.data("bs.modal").options.keyboard=!1,a.data("bs.modal").options.backdrop="static",a.find(".modal-body").html("<h4 class='text-center'>The operation has been successfully completed.</h4>"),a.find(".btn-close").hide(),a.find(".btn-valid").hide(),setTimeout(function(){location.reload()},t)},l=function(t){if(1===e)return!1;var a=$("#modalManager");a.find(".modal-body").html("<h4 class='text-center'>The operation has generated an error.</h4>"),void 0===t.responseJSON&&void 0===t.msg||a.find(".modal-body").append("<h5 class='text-center' style='color: red'><em>"+(void 0!==t.msg?t.msg:t.responseJSON.msg)+"</em></h5>"),a.find(".btn-close").html("Close"),a.find(".btn-valid").hide()},i=!1,s=function(t){var e=$(".lastlog, .errorlastlog");if(void 0===e.attr("attr-href"))return 1;$.ajax({url:e.attr("attr-href"),type:"POST",dataType:"json",success:function(t){if(200===t.code){var a=t.results;if(e.html(""),0===a.length)return e.append("<li>No logs</li>");$.each(a,function(t,a){var o=n(new Date(1e3*a.time));e.append("<li style='padding-top: 10px;'><ul><li>Date : "+o+"</li><li>IP : "+a.client_ip+"</li> <li>Uidie : <a href='"+a.log_url+"'>"+a.uidie+"</a> </li> <li>Message :  "+a.explain+"</li></ul></li>")})}},error:function(e){void 0!==t&&l(e)}})},c=function(t){var e=$(".routinglist");if(void 0===e.attr("attr-href"))return 1;$.ajax({url:e.attr("attr-href"),type:"POST",dataType:"json",success:function(t){if(200===t.code){var a=t.results;if(e.html(""),e.html(""),0===a.length)return e.append("<tr><td colspan='6'>No routing file</td></tr>");$.each(a,function(t,a){e.append("<tr><td>"+a.name+"</td><td>"+a.app+"</td><td>"+a.count_route+"</td><td><button class=' btn-info btn showrouting' attr-href='"+a.view+"' attr-appname='"+a.app+"' attr-filename='"+a.name+"'>VI</button></td><td><button class='btn-info btn todeleterouting' attr-href='"+a.remove+"' attr-appname='"+a.app+"' attr-filename='"+a.name+"'>DE</button></td></tr>")})}},error:function(e){void 0!==t&&l(e)}})},p=function(t){var e=$(".serviceslist");if(void 0===e.attr("attr-href"))return 1;$.ajax({url:e.attr("attr-href"),type:"POST",dataType:"json",success:function(t){if(200===t.code){var a=t.results;if(e.html(""),e.html(""),$.isEmptyObject(a))return e.append("<tr><td colspan='6'>No services</td></tr>");$.each(a,function(t,a){e.append("<tr><td>"+t+"</td><td>"+a.namespace+"</td><td>"+a.status+"</td><td><button class=' btn-info btn editservice' attr-href='"+a.edit+"'  attr-href2='"+a.edit_save+"'  attr-servicename='"+t+"' >ED</button></td><td><button class='btn-info btn deleteservice' attr-href='"+a.remove+"' attr-servicename='"+t+"'>DE</button></td></tr>")})}},error:function(e){void 0!==t&&l(e)}})};$(".iumio-unlimited-log-display").bind("scroll",function(){$(this).scrollTop()+$(this).innerHeight()>=$(this)[0].scrollHeight&&u(!0)}),$(".iumio-unlimited-log-display2").bind("scroll",function(){$(this).scrollTop()+$(this).innerHeight()>=$(this)[0].scrollHeight&&y(!0)});var f=0,h=0,m=!1,u=function(t){var e=$(".logslist");return void 0===e.attr("attr-href")?1:!0===m?1:(m=!0,void $.ajax({url:e.attr("attr-href"),type:"POST",data:{pos:f},dataType:"json",success:function(t){if(200===t.code){var a=t.results;if(0===a.length&&0===h)return e.append("<tr><td colspan='6'>No logs</td></tr>");if($.each(a,function(t,a){var o=n(new Date(1e3*a.time));e.append("<tr><td><a href='"+a.log_url+"'>"+a.uidie+"</a></td><td>"+o+"</td><td>"+a.code+"</td><td>"+a.client_ip+"</td><td>"+a.method+"</td></tr>")}),f+=a.length,$(".iumiocountlog").html(f),h++,m=!1,a.length<=0)return 1}},error:function(e){$(".loader-iumio-m").hide(),void 0!==t&&l(e)}}))},v=0,b=!1,y=function(t){var e=$(".logslist2");return void 0===e.attr("attr-href")?1:!0===b?1:(b=!0,void $.ajax({url:e.attr("attr-href"),type:"POST",data:{pos:v},dataType:"json",success:function(t){if(200===t.code){var a=t.results;if(0===a.length&&0===h)return e.append("<tr><td colspan='6'>No logs</td></tr>");if($.each(a,function(t,a){var o=n(new Date(1e3*a.time));e.append("<tr><td><a href='"+a.log_url+"'>"+a.uidie+"</a></td><td>"+o+"</td><td>"+a.code+"</td><td>"+a.client_ip+"</td><td>"+a.method+"</td></tr>")}),v+=a.length,$(".iumiocountlog2").html(v),0,b=!1,a.length<=0)return 1}},error:function(e){$(".loader-iumio-m2").hide(),void 0!==t&&l(e)}}))},g=function(t){var e=$(".databaseslist");if(void 0===e.attr("attr-href"))return 1;$.ajax({url:e.attr("attr-href"),type:"POST",dataType:"json",success:function(t){if(200===t.code){var a=t.results;if(e.html(""),0===a.length)return e.append("<tr><td colspan='6'>No database configuration</td></tr>");$.each(a,function(t,a){e.append("<tr><td>"+t+"</td><td>"+a.db_name+"</td><td>"+a.db_host+"</td><td>"+a.db_driver+"</td><td><button class=' btn-info btn toeditdatabase' attr-href='"+a.edit+"' attr-href2='"+a.edit_save+"' attr-dbconfig='"+t+"'>ED</button></td><td><button class='btn-info btn todeletedatabase' attr-href='"+a.remove+"' attr-dbconfig='"+t+"'>DE</button></td></tr>")})}},error:function(e){void 0!==t&&l(e)}})},x=function(t){var e=$(".hostslist");if(void 0===e.attr("attr-href"))return 1;$.ajax({url:e.attr("attr-href"),type:"POST",dataType:"json",success:function(t){if(200===t.code){var a=t.results;if(e.html(""),0===a.length)return e.append("<tr><td colspan='6'>No hosts configuration</td></tr>");$.each(a,function(t,a){e.append("<tr><td>"+t+"</td><td>"+a.allowed+"</td><td>"+a.denied+"</td><td><button class=' btn-info btn toedithosts' attr-href='"+a.edit+"' attr-href2='"+a.save+"' attr-env='"+t+"'>ED</button></td></tr>")})}},error:function(e){void 0!==t&&l(e)}})},w=function(t){var e=$(".smartyconfigs");if(void 0===e.attr("attr-href"))return 1;$.ajax({url:e.attr("attr-href"),type:"POST",dataType:"json",success:function(t){if(200===t.code){var a=t.results;if(e.html(""),0===a.length)return e.append("<tr><td colspan='4'>No smarty configurations</td></tr>");$.each(a,function(t,a){e.append("<tr><td>"+t+"</td><td>"+(!0===a.debug?"Enabled":"Disabled")+"</td><td>"+(1===a.cache?"Enabled":"Disabled")+"</td><td>"+a.console_debug+"</td><td><button class=' btn-info btn editsmartyconfig' attr-href='"+a.edit+"' attr-href2='"+a.save+"' attr-config='"+t+"'>ED</button></td></tr>")})}},error:function(e){void 0!==t&&l(e)}})},k=function(t){var e=$(".applist");if(void 0===e.attr("attr-href"))return 1;$.ajax({url:e.attr("attr-href"),type:"POST",dataType:"json",success:function(t){if(200===t.code){var a=t.results;if(e.html(""),0===a.length)return e.append("<tr><td colspan='6'>No apps</td></tr>");$.each(a,function(t,a){e.append("<tr><td>"+t+"</td><td>"+a.name+"</td><td>"+a.enabled+"</td><td>"+(""!==a.prefix?"/"+a.prefix:"no prefix")+"</td><td>"+a.class+"</td><td><button class=' btn-info btn toeditapp' attr-href2='"+a.link_edit_save+"' attr-appname='"+a.name+"' attr-prefix='"+a.prefix+"' attr-enabled='"+a.enabled+"' attr-href-config='"+a.link_config+"'>ED</button></td><td><button class='btn-info btn deleteapp' attr-href='"+a.link_remove+"' attr-appname='"+a.name+"'>DE</button></td><td><button class='btn-info btn exportapp' attr-href='"+a.link_export+"' attr-appname='"+a.name+"'>EXP</button></td></tr>")}),a}},error:function(e){void 0!==t&&l(e)}})},T=function(t){var e=$(".getAllEnvCache");if(void 0===e.attr("attr-href"))return 1;$.ajax({url:e.attr("attr-href"),type:"POST",dataType:"json",success:function(t){if(200===t.code){var a=t.results;if(e.html(""),0===a.length)return e.append("<tr><td colspan='6'>No cache directory</td></tr>");$.each(a,function(t,a){e.append("<tr><td>"+a.name+"</td><td>"+a.path+"</td><td>"+a.size+"</td><td class='"+(!0===a.perms?"iumio-green-color":"iumio-red-color")+"'>"+a.nperms+" "+(!0===a.perms?'<i class="pe-7s-angle-down-circle iumio-green-red-btn" style="color: green;"></i>':'<i class="pe-7s-close-circle iumio-green-red-btn" style="color: red;"></i>')+"</td><td>"+a.status+"</td><td><button class='btn-info btn clearcachespec' attr-href='"+a.clear+"' attr-env='"+a.env+"'>CL</button></td></tr>")})}},error:function(e){void 0!==t&&l(e)}})},j=function(t){var e=$(".getAllAssets");if(void 0===e.attr("attr-href"))return 1;$.ajax({url:e.attr("attr-href"),type:"POST",dataType:"json",success:function(t){if(200===t.code){var a=t.results;if(e.html(""),0===a.length)return e.append("<tr><td colspan='6'>No assets</td></tr>");$.each(a,function(t,a){1===a.haveassets&&e.append("<tr><td>"+t+"</td><td>"+a.name+"</td><td>"+(1===a.haveassets?"Yes":2===a.haveassets?"Empty":"No")+"</td><td>"+a.dev_perms+"</td><td>"+a.prod_perms+"</td><td class='"+(1===a.haveassets?(1===a.status_dev?"iumio-green-color":"iumio-red-color")+"'>"+(1===a.status_dev?'Published <i class="pe-7s-angle-down-circle iumio-green-red-btn" style="color: green;"></i>':'Need to be published <i class="pe-7s-close-circle iumio-green-red-btn" style="color: red;"></i>'):"Unavailable")+"</td><td class='"+(1===a.haveassets?(1===a.status_prod?"iumio-green-color":"iumio-red-color")+"'>"+(1===a.status_prod?'Published <i class="pe-7s-angle-down-circle iumio-green-red-btn" style="color: green;"></i>':'Need to be published <i class="pe-7s-close-circle iumio-green-red-btn" style="color: red;"></i>'):"")+"</td>"+(1===a.haveassets?"<td><button class='btn-info btn showoptionsassets' attr-href-clear-dev='"+a.clear.dev+"' attr-href-clear-prod='"+a.clear.prod+"' attr-href-publish-dev='"+a.publish.dev+"'  attr-href-publish-prod='"+a.publish.prod+"'  attr-href-clear-all='"+a.clear.all+"' attr-href-publish-all='"+a.publish.all+"' attr-appname='"+a.name+"' >AC</button></td>":"<td>Unavailable</td>")+"</tr>")})}},error:function(e){void 0!==t&&l(e)}})},_=function(t){var e=$(".getAllEnvCompile");if(void 0===e.attr("attr-href"))return 1;$.ajax({url:e.attr("attr-href"),type:"POST",dataType:"json",success:function(t){if(200===t.code){var a=t.results;if(e.html(""),0===a.length)return e.append("<tr><td colspan='6'>No compiled directory</td></tr>");$.each(a,function(t,a){e.append("<tr><td>"+a.name+"</td><td>"+a.path+"</td><td>"+a.size+"</td><td class='"+(!0===a.perms?"iumio-green-color":"iumio-red-color")+"'>"+a.nperms+" "+(!0===a.perms?'<i class="pe-7s-angle-down-circle iumio-green-red-btn" style="color: green;"></i>':'<i class="pe-7s-close-circle iumio-green-red-btn" style="color: red;"></i>')+"</td><td>"+a.status+"</td><td><button class='btn-info btn clearcompilespec' attr-href='"+a.clear+"' attr-env='"+a.env+"'>CL</button></td></tr>")})}},error:function(e){void 0!==t&&l(e)}})},S=0,M=function(t){if(1===S)return!1;S=1;var e=$(".requirements-deployment");if(void 0===e.attr("attr-href"))return 1;if("prod"===e.attr("attr-current-default-env"))return!1;var a=e.attr("attr-href"),n=0;e.html("<tr><td><i class='fa fa-spinner fa-spin fa-2x'></i>  <span class='text-info text-lg-center' style='padding-left: 20px; font-size: 20px'>Loading...</span> </td></tr>"),$.ajax({url:a,type:"POST",dataType:"json",success:function(t){if(200===t.code){var a=t.results;e.html(""),$.each(a,function(t,a){e.append('<tr>\n    <td class=\'break-word\'>\n    <div class="checkbox break-word">\n        <input id="checkbox1" type="checkbox">\n        <label for="checkbox1"></label>\n        </div>\n        </td>\n        <td class="text-left break-word\'">'+a.s+'</td>\n        <td class="td-actions text-right break-word\'">\n        <i class="fa '+(0==a.status?"fa-times text-danger":"fa-check text-success")+'"></i>\n        </td>\n        </tr>'),0==a.status&&n++});var o=$(".deployprod"),d=$(".text-deploy-iumio");n>0?(o.attr("disabled","disabled"),o.removeClass("btn-success"),o.addClass("btn-danger"),d.html("Your environment is not ready to be deployed"),d.removeClass("text-success"),d.addClass("text-danger")):(o.removeAttr("disabled"),o.removeClass("btn-danger"),o.addClass("btn-success"),d.html("Your environment is ready to be deployed"),d.removeClass("text-danger"),d.addClass("text-success")),$(".last_up_req_deploy").html(0),S=0}},error:function(e){S=0,void 0!==t&&l(e)}})},O=function(t){var e=$(".dashboardStats");if(void 0===e.attr("attr-href"))return 1;$.ajax({url:e.attr("attr-href"),type:"POST",dataType:"json",success:function(t){if(200===t.code){var e=t.results;$(".dashb-app").html(e.apps.number),$(".dashb-appena").html(e.apps.prefixed),$(".dashb-apppre").html(e.apps.enabled),$(".dashb-dbco").html(e.dbs.number),$(".dashb-route").html(e.routes.number),$(".dashb-routedisa").html(e.routes.disabled),$(".dashb-routevisi").html(e.routes.public),$(".dashb-reqsuc-dev").html(e.logs.dev.success),$(".dashb-err-dev").html(e.logs.dev.errors),$(".dashb-errcri-dev").html(e.logs.dev.critical),$(".dashb-erroth-dev").html(e.logs.dev.others),$(".dashb-reqsuc-prod").html(e.logs.prod.success),$(".dashb-err-prod").html(e.logs.prod.errors),$(".dashb-errcri-prod").html(e.logs.prod.critical),$(".dashb-erroth-prod").html(e.logs.prod.others),$(".dashb-services").html(e.services.number),$(".dashb-services-ena").html(e.services.enabled)}},error:function(e){void 0!==t&&l(e)}})};$(document).on("click",".todefaultapp",function(){var t=$(this),e=t.attr("attr-href"),a=t.attr("attr-appname"),n=$("#modalManager");n.find(".modal-header").html("<strong class='text-center'>Switch to default</strong>"),n.find(".modal-body").html("<h4 class='text-center'>Are you sure to set <strong>"+a+"</strong> default app ?</h4>"),n.find(".btn-close").html("No"),n.find(".btn-valid").html("Yes"),n.find(".btn-valid").attr("attr-href",e),n.find(".btn-valid").attr("attr-event","switchapp"),n.find(".btn-close").show(),n.find(".btn-valid").show(),o("show")}),$(document).on("click",".switchdeploy",function(){var t=$(this).attr("attr-href"),e=$("#modalManager");e.find(".modal-header").html("<strong class='text-center'>Switch to dev environment</strong>"),e.find(".modal-body").html("<h4 class='text-center'>Are you sure to undeployed all applications ?</h4>"),e.find(".btn-close").html("No"),e.find(".btn-valid").html("Yes"),e.find(".btn-valid").attr("attr-href",t),e.find(".btn-valid").attr("attr-event","confirmundeployed"),e.find(".btn-close").show(),e.find(".btn-valid").show(),o("show")}),$(document).on("click",".publishallassets",function(){var t=$(this).attr("attr-href"),e=$("#modalManager");e.find(".modal-header").html("<strong class='text-center'>Publish all assets - all environments</strong>"),e.find(".modal-body").html("<h4 class='text-center'>Are you sure to publish all assets for all environments ?</h4>"),e.find(".btn-close").html("No"),e.find(".btn-valid").html("Yes"),e.find(".btn-valid").attr("attr-href",t),e.find(".btn-valid").attr("attr-event","pallassets"),e.find(".btn-close").show(),e.find(".btn-valid").show(),o("show")}),$(document).on("click",".publishalldevassets",function(){var t=$(this).attr("attr-href"),e=$("#modalManager");e.find(".modal-header").html("<strong class='text-center'>Publish all assets - dev environment</strong>"),e.find(".modal-body").html("<h4 class='text-center'>Are you sure to publish all assets for dev environment ?</h4>"),e.find(".btn-close").html("No"),e.find(".btn-valid").html("Yes"),e.find(".btn-valid").attr("attr-href",t),e.find(".btn-valid").attr("attr-event","palldevassets"),e.find(".btn-close").show(),e.find(".btn-valid").show(),o("show")}),$(document).on("click",".publishallprodassets",function(){var t=$(this).attr("attr-href"),e=$("#modalManager");e.find(".modal-header").html("<strong class='text-center'>Publish all assets - prod environment</strong>"),e.find(".modal-body").html("<h4 class='text-center'>Are you sure to publish all assets for prod environment ?</h4>"),e.find(".btn-close").html("No"),e.find(".btn-valid").html("Yes"),e.find(".btn-valid").attr("attr-href",t),e.find(".btn-valid").attr("attr-event","pallprodassets"),e.find(".btn-close").show(),e.find(".btn-valid").show(),o("show")}),$(document).on("click",".clearallassets",function(){var t=$(this).attr("attr-href"),e=$("#modalManager");e.find(".modal-header").html("<strong class='text-center'>Clear all assets - all environments</strong>"),e.find(".modal-body").html("<h4 class='text-center'>Do you want to clear all assets for all environments ?</h4>"),e.find(".btn-close").html("No"),e.find(".btn-valid").html("Yes"),e.find(".btn-valid").attr("attr-href",t),e.find(".btn-valid").attr("attr-event","callassets"),e.find(".btn-close").show(),e.find(".btn-valid").show(),o("show")}),$(document).on("click",".clearalldevassets",function(){var t=$(this).attr("attr-href"),e=$("#modalManager");e.find(".modal-header").html("<strong class='text-center'>Clear all assets - dev environment</strong>"),e.find(".modal-body").html("<h4 class='text-center'>Do you want to clear all assets for dev environment ?</h4>"),e.find(".btn-close").html("No"),e.find(".btn-valid").html("Yes"),e.find(".btn-valid").attr("attr-href",t),e.find(".btn-valid").attr("attr-event","calldevassets"),e.find(".btn-close").show(),e.find(".btn-valid").show(),o("show")}),$(document).on("click",".clearallprodassets",function(){var t=$(this).attr("attr-href"),e=$("#modalManager");e.find(".modal-header").html("<strong class='text-center'>Clear all assets - prod environment</strong>"),e.find(".modal-body").html("<h4 class='text-center'>Do you want to clear all assets for prod environment ?</h4>"),e.find(".btn-close").html("No"),e.find(".btn-valid").html("Yes"),e.find(".btn-valid").attr("attr-href",t),e.find(".btn-valid").attr("attr-event","callprodassets"),e.find(".btn-close").show(),e.find(".btn-valid").show(),o("show")}),$(document).on("click",".deployprod",function(){var t=$(this),e=t.attr("attr-href");if("disabled"==t.attr("disabled"))return!1;var a=$("#modalManager");a.find(".modal-header").html("<strong class='text-center'>Deploy to production</strong>"),a.find(".modal-body").html("<h4 class='text-center'>Do you want to start the deployment to production environment ?</h4>"),a.find(".btn-close").html("No"),a.find(".btn-valid").html("Yes"),a.find(".btn-valid").attr("attr-href",e),a.find(".btn-valid").attr("attr-event","deployprodconfirm"),a.find(".btn-close").show(),a.find(".btn-valid").show(),o("show")}),$(document).on("click",".deleteapp",function(){var t=$(this),e=t.attr("attr-href"),a=t.attr("attr-appname"),n=$("#modalManager");n.find(".modal-header").html("<strong class='text-center'>Delete "+a+"</strong>"),n.find(".modal-body").html("<h4 class='text-center'>Do you want to delete <strong>"+a+"</strong> ?</h4>"),n.find(".btn-close").html("No"),n.find(".btn-valid").html("Yes"),n.find(".btn-valid").attr("attr-href",e),n.find(".btn-valid").attr("attr-event","removeapp"),n.find(".btn-close").show(),n.find(".btn-valid").show(),o("show")}),$(document).on("click",".todeletedatabase",function(){var t=$(this),e=t.attr("attr-href"),a=t.attr("attr-dbconfig"),n=$("#modalManager");n.find(".modal-header").html("<strong class='text-center'>Delete "+a+"</strong>"),n.find(".modal-body").html("<h4 class='text-center'>Do you want to delete <strong>"+a+"</strong> database configuration ?</h4>"),n.find(".btn-close").html("No"),n.find(".btn-valid").html("Yes"),n.find(".btn-valid").attr("attr-href",e),n.find(".btn-valid").attr("attr-event","removedb"),n.find(".btn-close").show(),n.find(".btn-valid").show(),o("show")}),$(document).on("click",".deleteservice",function(){var t=$(this),e=t.attr("attr-href"),a=t.attr("attr-servicename"),n=$("#modalManager");n.find(".modal-header").html("<strong class='text-center'>Delete "+a+" service</strong>"),n.find(".modal-body").html("<h4 class='text-center'>Do you want to delete <strong>"+a+"</strong> service configuration ?</h4>"),n.find(".btn-close").html("No"),n.find(".btn-valid").html("Yes"),n.find(".btn-valid").attr("attr-href",e),n.find(".btn-valid").attr("attr-event","removeservice"),n.find(".btn-close").show(),n.find(".btn-valid").show(),o("show")}),$(document).on("click",".rebuildjs",function(){var t=$(this).attr("attr-href"),e=$("#modalManager");e.find(".modal-header").html("<strong class='text-center'>Rebuild JS Routing</strong>"),e.find(".modal-body").html("<h4 class='text-center'>Do you want to rebuild the JS routing file ?</h4>"),e.find(".btn-close").html("No"),e.find(".btn-valid").html("Yes"),e.find(".btn-valid").attr("attr-href",t),e.find(".btn-valid").attr("attr-event","rebuildjsok"),e.find(".btn-close").show(),e.find(".btn-valid").show(),o("show")}),$(document).on("click",".btn-valid",function(){var e,n,o,s,f,h,m,v,b,w,j,S,M,O,P,C,D,N,E,Y,A,q,I,L,U,R,B,H,F,J,Q,W,V,z,G,X,K,Z,tt,et,at,nt,ot=$(this),dt=ot.attr("attr-event"),rt=ot.attr("attr-href");switch(dt){case"switchapp":nt=rt,$.ajax({url:nt,type:"POST",dataType:"json",success:function(t){200===t.code&&(k(!0),d())},error:function(t){l(t)}});break;case"removeapp":at=rt,t=1,$.ajax({url:at,type:"POST",dataType:"json",success:function(e){var a=e;if(t=0,200===a.code)if("RELOAD"===a.msg){i=!0,d();var n=$("#modalManager");n.find(".modal-body").html("<h4 class='text-center'>You have no longer registered apps.</h4>"),n.find(".modal-body").append("<h4 class='text-center'><em>Redirects to the framework installer</em></h4>"),n.find(".btn-close").hide(),n.find(".btn-valid").hide(),$("html").attr("style","pointer-events:none;bottom: 0;left: 0;position: fixed;right: 0;top: 0;"),$("body").attr("style","pointer-events:none;bottom: 0;left: 0;position: fixed;right: 0;top: 0;"),setTimeout(function(){location.reload()},5e3)}else k(!0),d();else l()},error:function(e){t=0,l(e)}});break;case"createvalidapp":!function(e){var n=$("input[type=text][name=appname]").val(),o=$("input[type=checkbox][name=template]:checked").val(),r=$("input[type=checkbox][name=enabled]:checked").val(),i=$("input[type=text][name=prefix]").val(),s=$("#modalManager");if(""===n)return s.find(".onealert").html("Oups! Enter an app name"),s.find(".onealert").show(),!1;if("App"===n||n.length<=3||!a(n))return s.find(".onealert").html("Oups! Error on app name. <br>Your app name must to end with 'App' keyword (example TestApp) "),s.find(".onealert").show(),!1;var c=n[n.length-1],p=n[n.length-2];if("App"!==n[n.length-3]+p+c&&a(n))return s.find(".onealert").html("Oups! Error on app name. <br>Your app name must to end with 'App' keyword (example TestApp) "),s.find(".onealert").show(),!1;o=void 0!==o?"yes":"no",r=void 0!==r?"yes":"no",s.find(".onealert").hide(),t=1,$.ajax({url:e,type:"POST",dataType:"json",data:{name:n,template:o,enabled:r,prefix:i},success:function(e){t=0,200===e.code?(k(!0),200===e.code?d():l()):l(e)},error:function(e){t=0,l(e)}})}(rt);break;case"clearlogs":et=rt,$.ajax({url:et,type:"POST",dataType:"json",success:function(t){200===t.code&&(d(),u(!0),y(!0))},error:function(t){l(t)}});break;case"removedb":tt=rt,$.ajax({url:tt,type:"POST",dataType:"json",success:function(t){g(!0),200===t.code?d():l()},error:function(t){l(t)}});break;case"removeservice":Z=rt,$.ajax({url:Z,type:"POST",dataType:"json",success:function(t){p(!0),200===t.code?d():l()},error:function(t){l(t)}});break;case"editdatabasesave":!function(t){var e=$("input[type=text][name=name]").val(),a=$("input[type=text][name=host]").val(),n=$("input[type=text][name=user]").val(),o=$("input[type=password][name=password]").val(),r=$("input[type=number][name=port]").val(),i=$("select[name=driver]").val(),s=$("#modalManager");if(""===e||""===a||""===n||""===i)return s.find(".onealert").html("Oups! An error was detected : A parameter is empty"),s.find(".onealert").show(),!1;s.find(".onealert").hide(),$.ajax({url:t,type:"POST",dataType:"json",data:{name:e,host:a,user:n,password:o,port:r,driver:i},success:function(t){200===t.code?(g(!0),200===t.code?d():l()):l()},error:function(t){l(t)}})}(rt);break;case"createsaveservice":!function(t){var e=$("input[type=text][name=name]").val(),a=$("input[type=text][name=namespace]").val(),n=$("input[type=checkbox][name=status]:checked").val(),o=$("#modalManager");if(""===e||""===a||""===n)return o.find(".onealert").html("Oups! An error was detected"),o.find(".onealert").show(),!1;n=void 0!==n?"enabled":"disabled",o.find(".onealert").hide(),$.ajax({url:t,type:"POST",dataType:"json",data:{name:e,namespace:a,status:n},success:function(t){200===t.code?(p(!0),200===t.code?d():l()):l()},error:function(t){l(t)}})}(rt);break;case"editservicesave":!function(t){var e=$("input[type=text][name=namespace]").val(),a=$("input[type=checkbox][name=status]:checked").val(),n=$("#modalManager");if(""===e||""===a)return n.find(".onealert").html("Oups! An error was detected"),n.find(".onealert").show(),!1;a=void 0!==a?"enabled":"disabled",n.find(".onealert").hide(),$.ajax({url:t,type:"POST",dataType:"json",data:{namespace:e,status:a},success:function(t){200===t.code?(p(!0),200===t.code?d():l()):l()},error:function(t){l(t)}})}(rt);break;case"createsavedatabase":!function(t){var e=$("input[type=text][name=config]").val(),a=$("input[type=text][name=name]").val(),n=$("input[type=text][name=host]").val(),o=$("input[type=text][name=user]").val(),r=$("input[type=password][name=password]").val(),i=$("input[type=number][name=port]").val(),s=$("select[name=driver]").val(),c=$("#modalManager");if(""===e||""===a||""===n||""===o||""===r||""===s)return c.find(".onealert").html("Oups! An error was detected"),c.find(".onealert").show(),!1;c.find(".onealert").hide(),$.ajax({url:t,type:"POST",dataType:"json",data:{config:e,name:a,host:n,user:o,password:r,port:i,driver:s},success:function(t){200===t.code?(g(!0),200===t.code?d():l()):l()},error:function(t){l(t)}})}(rt);break;case"clearallcache":K=rt,$.ajax({url:K,type:"POST",dataType:"json",success:function(t){T(!0),200===t.code?d():l()},error:function(t){l(t)}});break;case"clearcache":X=rt,$.ajax({url:X,type:"POST",dataType:"json",success:function(t){T(!0),200===t.code?d():l()},error:function(t){l(t)}});break;case"clearallcompile":G=rt,$.ajax({url:G,type:"POST",dataType:"json",success:function(t){_(),200===t.code?d():l()},error:function(t){l(t)}});break;case"clearcompile":z=rt,$.ajax({url:z,type:"POST",dataType:"json",success:function(t){_(),200===t.code?d():l()},error:function(t){l(t)}});break;case"editsmartysave":R=rt,B=$("input[type=checkbox][name=debug]:checked").val(),H=$("input[type=checkbox][name=cache]:checked").val(),F=$("input[type=checkbox][name=compile]:checked").val(),J=$("input[type=checkbox][name=force]:checked").val(),Q=$("input[type=checkbox][name=sdebug]:checked").val(),W=$("input[type=checkbox][name=console]:checked").val(),V=$("#modalManager"),B=void 0!==B,H=void 0!==H?1:0,F=void 0!==F,J=void 0!==J,Q=void 0!==Q,W=void 0!==W?"on":"off",V.find(".onealert").hide(),$.ajax({url:R,type:"POST",dataType:"json",data:{debug:B,cache:H,compile:F,force:J,sdebug:Q,console:W},success:function(t){200===t.code?(g(!0),200===t.code?(d(),$("#modalManager").find(".btn-close").hide(),setTimeout(function(){location.reload()},5e3)):l()):l()},error:function(t){l(t)}});break;case"editappsave":C=rt,D=$("input[type=text][name=prefix]").val(),N=$("input[type=checkbox][name=enabled]:checked").val(),E=$("select[name=vdev] option:selected").val(),Y=$("select[name=vprod] option:selected").val(),A=$("input[type=text][name=hostsdeva]").val(),q=$("input[type=text][name=hostsdevd]").val(),I=$("input[type=text][name=hostsproda]").val(),L=$("input[type=text][name=hostsprodd]").val(),U=$("#modalManager"),N=void 0!==N?"yes":"no",U.find(".onealert").hide(),$.ajax({url:C,type:"POST",dataType:"json",data:{prefix:D,enabled:N,vdev:E,vprod:Y,hostsdeva:A,hostsdevd:q,hostsproda:I,hostsprodd:L},success:function(t){200===t.code?(g(!0),200===t.code?(k(!0),d()):l()):l()},error:function(t){l(t)}});break;case"rebuildjsok":P=rt,$.ajax({url:P,type:"POST",dataType:"json",success:function(t){200===t.code&&(c(!0),d())},error:function(t){l(t)}});break;case"removearouting":O=rt,$.ajax({url:O,type:"POST",dataType:"json",success:function(t){200===t.code&&(c(!0),d())},error:function(t){l(t)}});break;case"processtoexportapp":M=rt,$.ajax({url:M,type:"POST",dataType:"json",success:function(t){200===t.code&&(k(!0),d())},error:function(t){l(t)}});break;case"installapp":w=rt,j=$("#apppackage").prop("files")[0],(S=new FormData).append("file",j),$.ajax({url:w,type:"POST",data:S,contentType:!1,cache:!1,processData:!1,success:function(t){var e=JSON.parse(t);200===e.code&&(k(!0),d(),$("#modalManager").find(".modal-body").append("<h5 class='text-center' style='color: limegreen'><em>"+e.ext+"</em></h5>"))},error:function(t){l(t);var e=JSON.parse(t.responseText);$("#modalManager").find(".modal-body").append("<h5 class='text-center' style='color: red'><em>"+e.msg+"</em></h5>")}});break;case"callprodassets":case"calldevassets":case"callassets":b=rt,$.ajax({url:b,type:"POST",dataType:"json",success:function(t){200===t.code?d():l()},error:function(t){l(t)}});break;case"pallprodassets":case"palldevassets":case"pallassets":v=rt,$.ajax({url:v,type:"POST",dataType:"json",success:function(t){200===t.code?d():l()},error:function(t){l(t)}});break;case"bautodev":case"bautoprod":case"bautoall":m=rt,$.ajax({url:m,type:"POST",dataType:"json",success:function(t){200===t.code&&d()},error:function(t){l(t)}});break;case"cautodev":case"cautoprod":case"cautoall":h=rt,$.ajax({url:h,type:"POST",dataType:"json",success:function(t){200===t.code&&d()},error:function(t){l(t)}});break;case"editsavehosts":o=rt,s=$("textarea[name=iumio-hosts-allowed]").val(),f=$("textarea[name=iumio-hosts-denied]").val(),$("#modalManager").find(".onealert").hide(),$.ajax({url:o,type:"POST",dataType:"json",data:{allowed:s,denied:f},success:function(t){200===t.code?(x(!0),d()):l()},error:function(t){l(t)}});break;case"confirmundeployed":n=rt,$.ajax({url:n,type:"POST",dataType:"json",success:function(t){200===t.code&&r(3e3)},error:function(t){l(t)}});break;case"deployprodconfirm":e=rt,$.ajax({url:e,type:"POST",dataType:"json",success:function(t){200===t.code&&r(3e3)},error:function(t){l(t)}})}}),$(document).on("click",".createapp",function(){var t=$(this).attr("attr-href"),e=$("#modalManager");e.find(".modal-header").html("<strong class='text-center'>Create one app</strong>"),e.find(".modal-header").append("<p class='alert alert-danger onealert' style='display: none'></p>"),e.find(".modal-body").html("<h4 class='text-center'>Fill in the fields to create an application.</h4>"),e.find(".modal-body").append("<br>"),e.find(".modal-body").append("<div class='container'><div class='row'>"),e.find(".modal-body").append("<div class='form-group text-center'><label>Name</label><input type='text' name='appname' class='form-control'></div>"),e.find(".modal-body").append("</div></div>"),e.find(".modal-body").append("<div class='form-group text-center'><label>Prefix</label><input type='text' name='prefix' class='form-control'></div>"),e.find(".modal-body").append("</div></div>"),e.find(".modal-body").append('<div class="container-new"><div class="form-group text-center"> <label>Default template</label> <div class="check"><input id="check" type="checkbox" name="template" style="display: none"/><label for="check"><div class="box"><i class="fa fa-check"></i></div> </label></div></div><div class="form-group text-center"><label>Enabled</label> <div class="check"><input id="check1" name="enabled"  type="checkbox" style="display: none" /><label for="check1"><div class="box"><i class="fa fa-check"></i></div> </label></div></div></div>'),e.find(".btn-close").html("Close"),e.find(".btn-valid").html("Create"),e.find(".btn-valid").attr("attr-href",t),e.find(".btn-valid").attr("attr-event","createvalidapp"),e.find(".btn-close").show(),e.find(".btn-valid").show(),o("show")}),$(document).on("click",".toeditdatabase",function(){var t=$(this),e=t.attr("attr-href"),a=t.attr("attr-href2"),n=t.attr("attr-dbconfig"),d=null;$.ajax({url:e,type:"POST",dataType:"json",success:function(t){if(200!==t.code)return l(),0;d=t.results;var e=$("#modalManager");e.find(".modal-header").html("<strong class='text-center'>Edit "+n+" configuration</strong>"),e.find(".modal-header").append("<p class='alert alert-danger onealert' style='display: none'></p>"),e.find(".modal-body").html("<h4 class='text-center'>Edit fields to update database configuration.</h4>"),e.find(".modal-body").append("<br>"),e.find(".modal-body").append("<div class='container'><div class='row'>"),e.find(".modal-body").append("<div class='form-group text-center'><label>Configuration name</label><input type='text' name='config' class='form-control text-center' value='"+n+"' disabled='disabled'></div>"),e.find(".modal-body").append("</div></div>"),e.find(".modal-body").append("<div class='form-group text-center'><label>Name</label><input type='text' name='name' class='form-control text-center' value='"+d.db_name+"'></div>"),e.find(".modal-body").append("</div></div>"),e.find(".modal-body").append("<div class='form-group text-center'><label>Host</label><input type='text' name='host' class='form-control text-center' value='"+d.db_host+"'></div>"),e.find(".modal-body").append("</div></div>"),e.find(".modal-body").append("<div class='form-group text-center'><label>User name</label><input type='text' name='user' class='form-control text-center' value='"+d.db_user+"'></div>"),e.find(".modal-body").append("</div></div>"),e.find(".modal-body").append("<div class='form-group text-center'><label>User password</label><input type='password' name='password' class='form-control text-center' value='"+d.db_password+"'></div>"),e.find(".modal-body").append("</div></div>"),e.find(".modal-body").append("<div class='form-group text-center'><label>Port</label><input type='number' name='port' class='form-control text-center' value='"+d.db_port+"'></div>"),e.find(".modal-body").append("</div></div>"),e.find(".modal-body").append("<div class='form-group text-center'><label>Driver</label> <select name='driver' class='form-control'><option value='mysql' "+("mysql"==d.db_driver?"selected":"")+">MySQL</option> <option value='pgsql' "+("pgsql"==d.db_driver?"selected":"")+">PostgreSQL</option> <option value='sqlsrv' "+("sqlsrv"==d.db_driver?"selected":"")+">Microsoft SQL Server</option> <option value='cubrid' "+("cubrid"==d.db_driver?"selected":"")+">CUBRID</option> <option value='firebird' "+("firebird"==d.db_driver?"selected":"")+">Firebird</option> <option value='ibm' "+("ibm"==d.db_driver?"selected":"")+">IBM</option> <option value='informix' "+("informix"==d.db_driver?"selected":"")+">Informix</option> <option value='sybase' "+("sybase"==d.db_driver?"selected":"")+">Sybase</option> <option value='mssql' "+("mssql"==d.db_driver?"selected":"")+">FreeTDS</option> <option value='dblib' "+("dblib"==d.db_driver?"selected":"")+">Microsoft SQL Server (dblib)</option> <option value='oci' "+("oci"==d.db_driver?"selected":"")+">Oracle</option> <option value='odbc' "+("odbc"==d.db_driver?"selected":"")+">IBM DB2 Call Level</option> <option value='4D' "+("4D"==d.db_driver?"selected":"")+">4D</option> </select></div>"),e.find(".modal-body").append("</div></div>"),e.find(".btn-close").html("Close"),e.find(".btn-valid").html("Update"),e.find(".btn-valid").attr("attr-href",a),e.find(".btn-valid").attr("attr-dbconfig",n),e.find(".btn-valid").attr("attr-event","editdatabasesave"),e.find(".btn-close").show(),e.find(".btn-valid").show(),o("show")}})}),$(document).on("click",".editservice",function(){var t=$(this),e=t.attr("attr-href"),a=t.attr("attr-href2"),n=t.attr("attr-servicename"),d=null;$.ajax({url:e,type:"POST",dataType:"json",success:function(t){if(200!==t.code)return l(),0;d=t.results;var e=$("#modalManager");e.find(".modal-header").html("<strong class='text-center'>Edit "+n+" service configuration</strong>"),e.find(".modal-header").append("<p class='alert alert-danger onealert' style='display: none'></p>"),e.find(".modal-body").html("<h4 class='text-center'>Edit fields to update service configuration.</h4>"),e.find(".modal-body").append("<br>"),e.find(".modal-body").append("<div class='container'><div class='row'>"),e.find(".modal-body").append("<div class='form-group text-center'><label>Namespace</label><input type='text' name='namespace' class='form-control text-center' value='"+d.namespace+"'></div>"),e.find(".modal-body").append("</div></div>"),e.find(".modal-body").append('<div class="container-new"><div class="form-group text-center"> <label>Enabled</label> <div class="check"><input id="check" type="checkbox" name="status" '+("enabled"===d.status?"checked='checked'":"")+' style="display: none"/><label for="check"><div class="box"><i class="fa fa-check"></i></div> </label></div></div></div>'),e.find(".modal-body").append("</div></div>"),e.find(".btn-close").html("Close"),e.find(".btn-valid").html("Update"),e.find(".btn-valid").attr("attr-href",a),e.find(".btn-valid").attr("attr-servicename",n),e.find(".btn-valid").attr("attr-event","editservicesave"),e.find(".btn-close").show(),e.find(".btn-valid").show(),o("show")}})}),$(document).on("click",".toedithosts",function(){var t=$(this),e=t.attr("attr-href"),a=t.attr("attr-href2"),n=t.attr("attr-env"),d=null;$.ajax({url:e,type:"POST",dataType:"json",success:function(t){if(200!==t.code)return l(),0;var e=(d=t.results).allowed,r=d.denied,i=$("#modalManager");i.find(".modal-header").html("<strong class='text-center'>Edit hosts for "+n+" environment</strong>"),i.find(".modal-header").append("<p class='alert alert-danger onealert' style='display: none'></p>"),i.find(".modal-body").html("<h4 class='text-center'>Split each host with ; delimiter</h4>"),i.find(".modal-body").append("<br>"),i.find(".modal-body").append("<div class='container'><div class='row'>"),i.find(".modal-body").append("<div class='form-group text-center'><label>Allowed hosts</label><textarea type='text' name='iumio-hosts-allowed' class='form-control text-center'>"+e+"</textarea></div>"),i.find(".modal-body").append("</div></div>"),i.find(".modal-body").append("<div class='form-group text-center'><label>Denied hosts</label><textarea type='text' name='iumio-hosts-denied' class='form-control text-center' >"+r+"</textarea></div>"),i.find(".modal-body").append("</div></div>"),i.find(".btn-close").html("Close"),i.find(".btn-valid").html("Update"),i.find(".btn-valid").attr("attr-href",a),i.find(".btn-valid").attr("attr-denv",n),i.find(".btn-valid").attr("attr-event","editsavehosts"),i.find(".btn-close").show(),i.find(".btn-valid").show(),o("show")}})}),$(document).on("click",".importapp",function(){var t=$(this).attr("attr-href"),e=$("#modalManager");e.find(".modal-header").html("<strong class='text-center'>Import an app</strong>"),e.find(".modal-header").append("<p class='alert alert-danger onealert' style='display: none'></p>"),e.find(".modal-body").html("<h4 class='text-center'>Select the app package in your computer</h4>"),e.find(".modal-body").append("<br>"),e.find(".modal-body").append("<div class='container'><div class='row'>"),e.find(".modal-body").append("<div class='form-group text-center'><label>Package</label><input type='file' id='apppackage' name='apppackage' class='form-control text-center'></div>"),e.find(".modal-body").append("</div></div>"),e.find(".modal-body").append("</div></div>"),e.find(".btn-close").html("Close"),e.find(".btn-valid").attr("attr-href",t),e.find(".btn-valid").attr("attr-event","installapp"),e.find(".btn-close").show(),e.find(".btn-valid").hide(),o("show")}),$(document).on("change","#apppackage",function(t){t.preventDefault();var e=$("#modalManager");e.find(".btn-valid").html("Install"),e.find(".btn-valid").show()}),$(document).on("click",".toeditapp",function(){var t,e,a,n=$(this),d=n.attr("attr-href2"),r=n.attr("attr-prefix"),l=n.attr("attr-enabled"),i=n.attr("attr-appname"),s=n.attr("attr-href-config"),c=$("#modalManager");t=i,e=s,a=function(t){var e="",a="",n="",s="";null!==t&&(void 0!==t.hosts_allowed_dev&&null!==t.hosts_allowed_dev&&(e=t.hosts_allowed_dev.join(";")),void 0!==t.hosts_denied_dev&&null!==t.hosts_denied_dev&&(a=t.hosts_denied_dev.join(";")),void 0!==t.hosts_allowed_prod&&null!==t.hosts_allowed_prod&&(n=t.hosts_allowed_prod.join(";")),void 0!==t.hosts_denied_prod&&null!==t.hosts_denied_prod&&(s=t.hosts_denied_prod.join(";"))),c.find(".modal-header").html("<strong class='text-center'>Edit "+i+" app configuration</strong>"),c.find(".modal-header").append("<p class='alert alert-danger onealert' style='display: none'></p>"),c.find(".modal-body").html("<h4 class='text-center'>Edit fields to update app configuration.</h4>"),c.find(".modal-body").append("<br>"),c.find(".modal-body").append("<div class='container'><div class='row'>"),c.find(".modal-body").append("<div class='form-group text-center'><label>Prefix</label><input type='text' name='prefix' class='form-control text-center' value='"+r+"' ></div>"),c.find(".modal-body").append("</div></div>"),c.find(".modal-body").append('<div class="container-new"><div class="form-group text-center"> <label>Enabled</label> <div class="check"><input id="check" type="checkbox" name="enabled" '+("yes"===l?"checked='checked'":"")+' style="display: none"/><label for="check"><div class="box"><i class="fa fa-check"></i></div> </label></div></div><div class="text-center "> <button data-toggle="collapse" data-target="#'+i+'-collapse" class=" btn btn-toolbar">Advanced options</button></div><br><div id="'+i+'-collapse" class="collapse"><div class="row"> <div class="col-md-12 text-center text-lg-center text-info"><strong>Advanced options</div> <div class="form-group text-center col-md-6"> <label>Visible on dev</label><select name="vdev" class="form-control"><option value="null" '+(null===t||void 0===t.visibility_dev||null===t.visibility_dev?"selected":"")+' >Not specified</option><option value="true" '+(null!==t&&void 0!==t.visibility_dev&&!0===t.visibility_dev?"selected":"")+' >Yes</option><option value="false" '+(null!==t&&void 0!==t.visibility_dev&&!1===t.visibility_dev?"selected":"")+' >No</option></select></div><div class="form-group text-center col-md-6"> <label>Visible on prod</label> <select name="vprod" class="form-control"><option value="null" '+(null===t||void 0===t.visibility_prod||null===t.visibility_prod?"selected":"")+' >Not specified</option><option value="true" '+(null!==t&&void 0!==t.visibility_prod&&!0===t.visibility_prod?"selected":"")+' >Yes</option><option value="false" '+(null!==t&&void 0!==t.visibility_prod&&!1===t.visibility_prod?"selected":"")+" >No</option></select></div><div class='form-group text-center col-md-12'><label>Hosts allowed on dev <br><small class='text-info'>(Split each host with ; delimiter)</small></label><input type='text' name='hostsdeva' class='form-control text-center' value='"+e+"' ></div><div class='form-group text-center col-md-12'><label>Hosts denied on dev <br><small class='text-info'>(Split each host with ; delimiter)</small></label><input type='text' name='hostsdevd' class='form-control text-center' value='"+a+"' ></div><div class='form-group text-center col-md-12'><label>Hosts allowed on prod <br><small class='text-info'>(Split each host with ; delimiter)</small></label><input type='text' name='hostsproda' class='form-control text-center' value='"+n+"' ></div><div class='form-group text-center col-md-12'><label>Hosts denied on prod <br><small class='text-info'>(Split each host with ; delimiter)</small></label><input type='text' name='hostsprodd' class='form-control text-center' value='"+s+"' ></div></div></div>"),c.find(".modal-body").append("</div></div>"),c.find(".btn-close").html("Close"),c.find(".btn-valid").html("Update"),c.find(".btn-valid").attr("attr-href",d),c.find(".btn-valid").attr("attr-appname",i),c.find(".btn-valid").attr("attr-event","editappsave"),c.find(".btn-close").show(),c.find(".btn-valid").show(),o("show")},$.ajax({url:e,type:"POST",dataType:"json",data:{appname:t},success:function(e){200===e.code?a(e.result):console.error("Cannot get the app : "+t+" - Code : "+e.code+" - "+JSON.stringify(e))},error:function(e){console.error("Cannot get the app : "+t+" - "+JSON.stringify(e))}})}),$(document).on("click",".editsmartyconfig",function(){var t=$(this),e=t.attr("attr-href"),a=t.attr("attr-href2"),n=t.attr("attr-config"),d=null;$.ajax({url:e,type:"POST",dataType:"json",success:function(t){if(200!==t.code)return l(),0;d=t.results;var e=$("#modalManager");e.find(".modal-header").html("<strong class='text-center'>Edit "+n+" configuration</strong>"),e.find(".modal-header").append("<p class='alert alert-danger onealert' style='display: none'></p>"),e.find(".modal-body").html("<h4 class='text-center'>Edit fields to update smarty configuration.</h4>"),e.find(".modal-body").append("<br>"),e.find(".modal-body").append("<div class='container'><div class='row'>"),e.find(".modal-body").append("<div class='form-group text-center'><label>Configuration name</label><input type='text' name='config' class='form-control text-center' value='"+n+"' disabled='disabled'></div>"),e.find(".modal-body").append("</div></div>"),e.find(".modal-body").append('<div class="container-new"><div class="form-group text-center"> <label>Debug</label> <div class="check"><input id="check" type="checkbox" name="debug" '+(!0===d.debug?"checked='checked'":"")+' style="display: none"/><label for="check"><div class="box"><i class="fa fa-check"></i></div> </label></div></div><div class="form-group text-center"><label>Cache</label> <div class="check"><input id="check1" name="cache" '+(1===d.cache?"checked='checked'":"")+' type="checkbox" style="display: none" /><label for="check1"><div class="box"><i class="fa fa-check"></i></div> </label></div></div><div class="form-group text-center"><label>Compile Check</label> <div class="check"><input id="check2" name="compile" '+(!0===d.compile_check?"checked='checked'":"")+' type="checkbox" style="display: none" /><label for="check2"><div class="box"><i class="fa fa-check"></i></div> </label></div></div><div class="form-group text-center"><label>Force to compile</label> <div class="check"><input id="check3" name="force" '+(!0===d.force_compile?"checked='checked'":"")+' type="checkbox" style="display: none" /><label for="check3"><div class="box"><i class="fa fa-check"></i></div> </label></div></div><div class="form-group text-center"><label>Smarty Debug</label> <div class="check"><input id="check4" name="sdebug" '+(!0===d.smarty_debug?"checked='checked'":"")+' type="checkbox" style="display: none" /><label for="check4"><div class="box"><i class="fa fa-check"></i></div> </label></div></div><div class="form-group text-center"><label>Console</label> <div class="check"><input id="check5" name="console" '+("on"===d.console_debug?"checked='checked'":"")+' type="checkbox" style="display: none" /><label for="check5"><div class="box"><i class="fa fa-check"></i></div> </label></div></div></div>'),e.find(".modal-body").append("</div></div>"),e.find(".btn-close").html("Close"),e.find(".btn-valid").html("Update"),e.find(".btn-valid").attr("attr-href",a),e.find(".btn-valid").attr("attr-config",n),e.find(".btn-valid").attr("attr-event","editsmartysave"),e.find(".btn-close").show(),e.find(".btn-valid").show(),o("show")},error:function(t){l(t)}})}),$(document).on("click",".iumioDeployReload",function(){M(!0)}),$(document).on("click",".showrouting",function(){var t=$(this),e=t.attr("attr-href"),a=t.attr("attr-appname"),n=t.attr("attr-filename"),d=null;$.ajax({url:e,type:"POST",dataType:"json",success:function(t){if(200!==t.code)return l(),0;d=t.results;var r=$("#modalManager"),i="";r.find(".modal-header").html("<strong class='text-center'>Content of  "+n+" routing file :  "+a+"</strong>"),r.find(".modal-body").html("");var s='<div class="container-fluid"><div class="row">';$.each(d,function(t,e){var a="",n="";if(void 0!==e.params){var o=e.params;i=e.r_parameters;for(var d=0;d<o.length;d++)void 0!==i[d]?a+="<li class='list-group-item text-center'> "+o[d]+" <i class='pe-7s-right-arrow iumio-picto-routing'></i> <strong>"+i[d][1]+"</strong></li>":a+="<li class='list-group-item text-center'> "+o[d]+" <i class='pe-7s-right-arrow iumio-picto-routing'></i> <strong>untyped</strong></li>"}else a="<li class='list-group-item text-center'>No parameters</li>";void 0!==e.route_gen&&"disabled"!==e.visibility&&(n="<li class='list-group-item'> <a class='text-center' href='"+e.route_gen+"'><strong>Go to link</strong></a></li>"),s+='<div class="col-md-12"><div class="card"><div class="header"><h4 class="title">Route : <a href="#">'+e.routename+'</a></h4><p class="category">Details</p>   </div>  <div class="content" > <ul class="list-group iumio-routing-list-details text-center"><li class="list-group-item">Path : <span class="">'+e.path+'</span> </li><li class="list-group-item">Linked master : <span class="">'+e.controller+'</span></li><li class="list-group-item">Visibility : <span class="">'+e.visibility+'</span></li><li class="list-group-item">Activity  : <span class="">'+e.method+'</span></li><li class="list-group-item">Method(s) allowed : <span class="">'+e.m_allow+'</span></li><li class="list-group-item">Parameters<ul class="list-group" style="padding-top: 13px">'+a+"</ul></li>"+n+"</ul></div></div>"}),s+="</div></div>",r.find(".modal-body").append(s),r.find(".btn-close").html("Close"),r.find(".btn-valid").attr("attr-href",e),r.find(".btn-close").show(),r.find(".btn-valid").hide(),o("show")},error:function(t){l(t)}})}),$(document).on("click",".createdatabaseconfig",function(){var t=$(this).attr("attr-href"),e=$("#modalManager");e.find(".modal-header").html("<strong class='text-center'>Create a new database configuration</strong>"),e.find(".modal-header").append("<p class='alert alert-danger onealert' style='display: none'></p>"),e.find(".modal-body").html("<h4 class='text-center'>Fill in the fields to create a database configuration.</h4>"),e.find(".modal-body").append("<br>"),e.find(".modal-body").append("<div class='container'><div class='row'>"),e.find(".modal-body").append("<div class='form-group text-center'><label>Configuration name</label><input type='text' name='config' class='form-control text-center'></div>"),e.find(".modal-body").append("</div></div>"),e.find(".modal-body").append("<div class='form-group text-center'><label>Name</label><input type='text' name='name' class='form-control text-center'></div>"),e.find(".modal-body").append("</div></div>"),e.find(".modal-body").append("<div class='form-group text-center'><label>Host</label><input type='text' name='host' class='form-control text-center'></div>"),e.find(".modal-body").append("</div></div>"),e.find(".modal-body").append("<div class='form-group text-center'><label>User name</label><input type='text' name='user' class='form-control text-center'></div>"),e.find(".modal-body").append("</div></div>"),e.find(".modal-body").append("<div class='form-group text-center'><label>User password</label><input type='password' name='password' class='form-control text-center'></div>"),e.find(".modal-body").append("</div></div>"),e.find(".modal-body").append("<div class='form-group text-center'><label>Port</label><input type='number' name='port' class='form-control text-center'></div>"),e.find(".modal-body").append("</div></div>"),e.find(".modal-body").append("<div class='form-group text-center'><label>Driver</label><select name='driver' class='form-control'><option value='mysql' selected>MySQL</option> <option value='pgsql'>PostgreSQL</option> <option value='sqlsrv'>Microsoft SQL Server</option> <option value='cubrid'>CUBRID</option> <option value='firebird'>Firebird</option> <option value='ibm'>IBM</option> <option value='informix'>Informix</option> <option value='sybase'>Sybase</option> <option value='mssql'>FreeTDS</option> <option value='dblib'>Microsoft SQL Server (dblib)</option> <option value='oci'>Oracle</option> <option value='odbc'>IBM DB2 Call Level</option> <option value='4D'>4D</option> </select></div>"),e.find(".modal-body").append("</div></div>"),e.find(".btn-close").html("Close"),e.find(".btn-valid").html("Create"),e.find(".btn-valid").attr("attr-href",t),e.find(".btn-valid").attr("attr-event","createsavedatabase"),e.find(".btn-close").show(),e.find(".btn-valid").show(),o("show")}),$(document).on("click",".createservice",function(){var t=$(this).attr("attr-href"),e=$("#modalManager");e.find(".modal-header").html("<strong class='text-center'>Create a new service configuration</strong>"),e.find(".modal-header").append("<p class='alert alert-danger onealert' style='display: none'></p>"),e.find(".modal-body").html("<h4 class='text-center'>Fill in the fields to create a service configuration.</h4>"),e.find(".modal-body").append("<br>"),e.find(".modal-body").append("<div class='container'><div class='row'>"),e.find(".modal-body").append("<div class='form-group text-center'><label>name</label><input type='text' name='name' class='form-control text-center'></div>"),e.find(".modal-body").append("</div></div>"),e.find(".modal-body").append("<div class='form-group text-center'><label>Namespace</label><input type='text' name='namespace' class='form-control text-center'></div>"),e.find(".modal-body").append("</div></div>"),e.find(".modal-body").append('<div class="container-new"><div class="form-group text-center"> <label>Enabled</label> <div class="check"><input id="check" type="checkbox" name="status" style="display: none"/><label for="check"><div class="box"><i class="fa fa-check"></i></div> </label></div></div></div>'),e.find(".modal-body").append("</div></div>"),e.find(".btn-close").html("Close"),e.find(".btn-valid").html("Create"),e.find(".btn-valid").attr("attr-href",t),e.find(".btn-valid").attr("attr-event","createsaveservice"),e.find(".btn-close").show(),e.find(".btn-valid").show(),o("show")}),$(document).on("click",".showoptionsassets",function(){var t=$(this),e=t.attr("attr-href-clear-dev"),a=t.attr("attr-href-clear-prod"),n=t.attr("attr-href-publish-dev"),d=t.attr("attr-href-publish-prod"),r=t.attr("attr-href-clear-all"),l=t.attr("attr-href-publish-all"),i=t.attr("attr-appname"),s=$("#modalManager");s.find(".modal-header").html("<strong class='text-center'>Options for "+i+" assets</strong>"),s.find(".modal-header").append("<p class='alert alert-danger onealert' style='display: none'></p>"),s.find(".modal-body").html("<h4 class='text-center'>Choose the action you want to perform for "+i+" assets.</h4>"),s.find(".modal-body").append("<br>"),s.find(".modal-body").append('<div class="row center-block text-center manager-options"><div class="col-md-4 text-center"><a class="btn-default btn publishappassets" attr-href="'+n+'"> Publish dev</a></div><div class="col-md-4 text-center"><a class="btn-default btn publishappassets" attr-href="'+d+'" >Publish prod</a></div><div class="col-md-4 text-center"><a class="btn-default btn publishappassets" attr-href="'+l+'">Publish all</a></div><div class="col-md-4 text-center"><a class="btn-default btn publishappassets" attr-href="'+e+'">Clear dev</a></div><div class="col-md-4 text-center"><a class="btn-default btn publishappassets" attr-href="'+a+'">Clear prod</a></div><div class="col-md-4 text-center"><a class="btn-default btn publishappassets" attr-href="'+r+'">Clear all</a></div></div>'),s.find(".btn-close").html("Close"),s.find(".btn-close").show(),s.find(".btn-valid").hide(),o("show")}),$(document).on("click",".clearlogs",function(){var t=$(this),e=t.attr("attr-href"),a=t.attr("attr-env"),n=$("#modalManager");n.find(".modal-header").html("<strong class='text-center'>Clear log for "+a+" environment</strong>"),n.find(".modal-body").html("<h4 class='text-center'>Would you like to empty log file for <strong>"+a+"</strong> environment ?</h4>"),n.find(".btn-close").html("No"),n.find(".btn-valid").html("Yes"),n.find(".btn-valid").attr("attr-href",e),n.find(".btn-valid").attr("attr-event","clearlogs"),n.find(".btn-close").show(),n.find(".btn-valid").show(),o("show")}),$(document).on("click",".clearcache",function(){var t=$(this),e=t.attr("attr-href"),a=(t.attr("attr-env"),$("#modalManager"));a.find(".modal-header").html("<strong class='text-center'>Clear cache for all environment</strong>"),a.find(".modal-body").html("<h4 class='text-center'>Would you like to empty cache folder for all environment ?</h4>"),a.find(".btn-close").html("No"),a.find(".btn-valid").html("Yes"),a.find(".btn-valid").attr("attr-href",e),a.find(".btn-valid").attr("attr-event","clearallcache"),a.find(".btn-close").show(),a.find(".btn-valid").show(),o("show")}),$(document).on("click",".clearcachespec",function(){var t=$(this),e=t.attr("attr-href"),a=t.attr("attr-env"),n=$("#modalManager");n.find(".modal-header").html("<strong class='text-center'>Clear cache for "+a+" environment</strong>"),n.find(".modal-body").html("<h4 class='text-center'>Would you like to empty cache folder for <strong>"+a+"</strong> environment ?</h4>"),n.find(".btn-close").html("No"),n.find(".btn-valid").html("Yes"),n.find(".btn-valid").attr("attr-href",e),n.find(".btn-valid").attr("attr-event","clearcache"),n.find(".btn-close").show(),n.find(".btn-valid").show(),o("show")}),$(document).on("click",".clearcompile",function(){var t=$(this),e=t.attr("attr-href"),a=(t.attr("attr-env"),$("#modalManager"));a.find(".modal-header").html("<strong class='text-center'>Clear compiled for all environment</strong>"),a.find(".modal-body").html("<h4 class='text-center'>Would you like to empty compiled folder for all environment ?</h4>"),a.find(".btn-close").html("No"),a.find(".btn-valid").html("Yes"),a.find(".btn-valid").attr("attr-href",e),a.find(".btn-valid").attr("attr-event","clearallcompile"),a.find(".btn-close").show(),a.find(".btn-valid").show(),o("show")}),$(document).on("click",".todeleterouting",function(){var t=$(this),e=t.attr("attr-href"),a=t.attr("attr-appname"),n=t.attr("attr-filename"),d=$("#modalManager");d.find(".modal-header").html("<strong class='text-center'>Remove a routing file</strong>"),d.find(".modal-body").html("<h4 class='text-center'>Would you like to remove "+n+" routing file related with "+a+" ?</h4>"),d.find(".btn-close").html("No"),d.find(".btn-valid").html("Yes"),d.find(".btn-valid").attr("attr-href",e),d.find(".btn-valid").attr("attr-event","removearouting"),d.find(".btn-close").show(),d.find(".btn-valid").show(),o("show")}),$(document).on("click",".exportapp",function(){var t=$(this),e=t.attr("attr-href"),a=t.attr("attr-appname"),n=$("#modalManager");n.find(".modal-header").html("<strong class='text-center'>Export an app</strong>"),n.find(".modal-body").html("<h4 class='text-center'>Would you like to export "+a+" ?</h4>"),n.find(".btn-close").html("No"),n.find(".btn-valid").html("Yes"),n.find(".btn-valid").attr("attr-href",e),n.find(".btn-valid").attr("attr-event","processtoexportapp"),n.find(".btn-close").show(),n.find(".btn-valid").show(),o("show")}),$(document).on("click",".clearcompilespec",function(){var t=$(this),e=t.attr("attr-href"),a=t.attr("attr-env"),n=$("#modalManager");n.find(".modal-header").html("<strong class='text-center'>Clear compiled for "+a+" environment</strong>"),n.find(".modal-body").html("<h4 class='text-center'>Would you like to empty compiled folder for <strong>"+a+"</strong> environment ?</h4>"),n.find(".btn-close").html("No"),n.find(".btn-valid").html("Yes"),n.find(".btn-valid").attr("attr-href",e),n.find(".btn-valid").attr("attr-event","clearcompile"),n.find(".btn-close").show(),n.find(".btn-valid").show(),o("show")}),$(document).on("click",".clearautoloaderprod",function(){var t=$(this).attr("attr-href"),e=$("#modalManager");e.find(".modal-header").html("<strong class='text-center'>Clear ClassMap - PROD</strong>"),e.find(".modal-body").html("<h4 class='text-center'>Do you want to clear the class map file for prod environment ?</h4>"),e.find(".btn-close").html("No"),e.find(".btn-valid").html("Yes"),e.find(".btn-valid").attr("attr-href",t),e.find(".btn-valid").attr("attr-event","cautoprod"),e.find(".btn-close").show(),e.find(".btn-valid").show(),o("show")}),$(document).on("click",".buildautoloaderdev",function(){var t=$(this).attr("attr-href"),e=$("#modalManager");e.find(".modal-header").html("<strong class='text-center'>Build ClassMap - PROD</strong>"),e.find(".modal-body").html("<h4 class='text-center'>Do you want to build the class map file for dev environment ?</h4>"),e.find(".btn-close").html("No"),e.find(".btn-valid").html("Yes"),e.find(".btn-valid").attr("attr-href",t),e.find(".btn-valid").attr("attr-event","bautodev"),e.find(".btn-close").show(),e.find(".btn-valid").show(),o("show")}),$(document).on("click",".buildautoloaderprod",function(){var t=$(this).attr("attr-href"),e=$("#modalManager");e.find(".modal-header").html("<strong class='text-center'>Build ClassMap - PROD</strong>"),e.find(".modal-body").html("<h4 class='text-center'>Do you want to build the class map file for prod environment ?</h4>"),e.find(".btn-close").html("No"),e.find(".btn-valid").html("Yes"),e.find(".btn-valid").attr("attr-href",t),e.find(".btn-valid").attr("attr-event","bautoprod"),e.find(".btn-close").show(),e.find(".btn-valid").show(),o("show")}),$(document).on("click",".btn-close, #modalManager",function(){e=0}),$(document).on("click",".buildautoloaderall",function(){var t=$(this).attr("attr-href"),e=$("#modalManager");e.find(".modal-header").html("<strong class='text-center'>Build ClassMap - All environements</strong>"),e.find(".modal-body").html("<h4 class='text-center'>Do you want to build the class map file for each environment ?</h4>"),e.find(".btn-close").html("No"),e.find(".btn-valid").html("Yes"),e.find(".btn-valid").attr("attr-href",t),e.find(".btn-valid").attr("attr-event","cautoall"),e.find(".btn-close").show(),e.find(".btn-valid").show(),o("show")}),$(document).on("click",".publishappassets",function(){var t=$(this).attr("attr-href");$.ajax({url:t,type:"POST",dataType:"json",success:function(t){j(!0),200===t.code?d():l()},error:function(t){l(t)}})}),s(!0),k(!0),u(!0),y(!0),g(!0),x(!0),T(!0),_(!0),w(!0),j(!0),c(!0),p(!0),O(!0),M(!0),setInterval(function(){if(1===t)return!1;!1===i&&(s(!0),k(!0),g(!0),x(!0),T(!0),_(!0),w(!0),j(!0),c(!0),p(!0),O(!0))},7e3),setInterval(function(){!1===i&&(u(!0),y(!0))},1e4),setInterval(function(){var t,e;t=$(".last_up_req_deploy"),e=parseInt(t.html()),t.html(e+1)},6e4)}),$(window).on("load",function(){$(".se-pre-con").fadeOut("fast")});